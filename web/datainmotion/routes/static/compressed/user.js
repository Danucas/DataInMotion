async function login(e){const o=document.getElementById("username").value,r=document.querySelector('[type="password"]').value;if(""!==o&&""!==r){const e=await fetch(`${global.prot}://${global.domain}${global.apiPort}/api/v1/auth/login`,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({email:o,password:r})});let t=await e.json();if(t.id||window.location.replace(`${global.prot}://${global.domain}/login`),document.querySelector('[for="user"]').style.color="grey",localStorage.user=t.id,localStorage.token=t.token,localStorage.isLogged=!0,localStorage.openboard){const e=localStorage.openboard;localStorage.removeItem("openboard"),window.location.replace(`${global.prot}://${global.domain}/boards/${e}`)}else window.location.replace(`${global.prot}://${global.domain}/user/boards`)}else""===o&&""!==r?(document.querySelector('[for="user"]').innerHTML="Empty Username",document.querySelector('[for="user"]').style.color="red",document.querySelector('[for="user"]').style.fontWeight="bold"):""===r&&""!==o?(document.querySelector('[for="pass"]').innerHTML="No password",document.querySelector('[for="pass"]').style.color="red",document.querySelector('[for="pass"]').style.fontWeight="bold"):""===r&&""===o&&(document.querySelector('[for="pass"]').innerHTML="No password",document.querySelector('[for="pass"]').style.color="red",document.querySelector('[for="pass"]').style.fontWeight="bold",document.querySelector('[for="user"]').innerHTML="Empty Username",document.querySelector('[for="user"]').style.color="red",document.querySelector('[for="user"]').style.fontWeight="bold")}async function register(e){const o=document.getElementById("username").value,r=document.querySelector('[type="password"]').value,t=document.querySelector('[name="confirm"]').value;if(""!==o&&""!==r&&r===t){const e=await fetch(`${global.prot}://${global.domain}${global.apiPort}/api/v1/auth/register`,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({email:o,password:r})});let t=await e.json();if(t.id||window.location.replace(`${global.prot}://${global.domain}/register`),document.querySelector('[for="user"]').style.color="grey",localStorage.user=t.id,localStorage.token=t.token,localStorage.openboard){const e=localStorage.openboard;localStorage.removeItem("openboard"),window.location.replace(`${global.prot}://${global.domain}/boards/${e}`)}else window.location.replace(`${global.prot}://${global.domain}/check_mail`)}else""===o&&""!==r?(document.querySelector('[for="user"]').innerHTML="Empty Username",document.querySelector('[for="user"]').style.color="red",document.querySelector('[for="user"]').style.fontWeight="bold"):""===r&&""!==o?(document.querySelector('[for="pass"]').innerHTML="No password",document.querySelector('[for="pass"]').style.color="red",document.querySelector('[for="pass"]').style.fontWeight="bold"):""===r&&""===o?(document.querySelector('[for="pass"]').innerHTML="No password",document.querySelector('[for="pass"]').style.color="red",document.querySelector('[for="pass"]').style.fontWeight="bold",document.querySelector('[for="user"]').innerHTML="Empty Username",document.querySelector('[for="user"]').style.color="red",document.querySelector('[for="user"]').style.fontWeight="bold"):r!==t&&(document.querySelector('[for="confirm"]').innerHTML="The password must be the same",document.querySelector('[for="confirm"]').style.color="red",document.querySelector('[for="confirm"]').style.fontWeight="bold")}async function getLoginView(){const e=await fetch(`${global.prot}://${global.domain}/login`);return await e.text()}async function changePassword(e){const o=document.querySelector('[type="password"]').value,r=document.querySelector('[name="confirm"]').value;if(""!==r&&""!==o&&r===o){const e=await fetch(`${global.prot}://${global.domain}${global.apiPort}/api/v1/auth/reset`,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:localStorage.getItem("token")},body:JSON.stringify({password:o})});let r=await e.json();r.id||window.location.replace(`${global.prot}://${global.domain}/login`),localStorage.removeItem("token"),localStorage.removeItem("user"),window.location.replace(`${global.prot}://${global.domain}/login`)}else""===r&&""!==o?(document.querySelector('[for="confirm"]').innerHTML="Please confirm your password",document.querySelector('[for="confirm"]').style.color="red",document.querySelector('[for="confirm"]').style.fontWeight="bold"):""===o&&""!==r&&(document.querySelector('[for="pass"]').innerHTML="No password",document.querySelector('[for="pass"]').style.color="red",document.querySelector('[for="pass"]').style.fontWeight="bold")}async function forgotPassword(e){const o=document.getElementById("username").value;if(""!==o){const e=await fetch(`${global.prot}://${global.domain}${global.apiPort}/api/v1/auth/forgot`,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({email:o})});await e.json();localStorage.removeItem("token"),localStorage.removeItem("user"),window.location.replace(`${global.prot}://${global.domain}/check_mail`)}else document.querySelector('[for="username"]').innerHTML="Provide an email",document.querySelector('[for="username"]').style.color="red",document.querySelector('[for="username"]').style.fontWeight="bold"}